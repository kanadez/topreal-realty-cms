
function Utils(){this.convertTimestampForGoogleCalendar=function(timestamp){var a=new Date(timestamp*1000);var year=a.getFullYear();var month=this.leadZero(a.getMonth()+1,2);var date=this.leadZero(a.getDate(),2);var time=year+"-"+month+"-"+date;return time};this.convertTimestampForDatepicker=function(timestamp){var a=new Date(timestamp*1000);var year=a.getFullYear();var month=this.leadZero(a.getMonth()+1,2);var date=this.leadZero(a.getDate(),2);var time=date+"/"+month+"/"+year;return time};this.getNowInTime=function(){var now=new Date();var hh="";var mm="";if(String(now.getHours()).length===1){hh="0"+now.getHours()}else{hh=now.getHours()}if(String(now.getMinutes()).length===1){mm="0"+now.getMinutes()}else{mm=now.getMinutes()}return hh+":"+mm};this.getTimeFromTimestamp=function(timestamp){var now=new Date(timestamp*1000);return this.leadZero(now.getHours(),2)+":"+this.leadZero(now.getMinutes(),2)};this.leadZero=function(number,length){while(number.toString().length<length){number="0"+number}return number};this.errorModal=function(error_msg){$("#error_modal .modal-body").html(error_msg);$("#error_modal").modal("show")};this.accessErrorModal=function(error_msg){$("#access_error_modal .modal-body").text(error_msg);$("#access_error_modal").modal("show")};this.warningModal=function(warning_msg){$("#warning_modal .modal-body").html(warning_msg);$("#warning_modal").modal("show")};this.successModal=function(success_msg){$("#success_modal .modal-body").html(success_msg);$("#success_modal").modal("show")};this.isEmpty=function(field_id){var element=$("#"+field_id);if(element.val().trim().length===0){this.highlightField(element);return 1}else{return 0}};this.highlightField=function(field){field.css({background:"#c6123d"});field.animate({backgroundColor:"rgba(0,0,0,0)"},1000)};this.lightField=function(field){field.css({backgroundColor:"rgba(198, 18, 61, 0.16)"});field.animate({backgroundColor:"rgba(255, 255, 255, 1)"},1000)};this.numberWithCommas=function(x){return x.toString().trim().replace(/\B(?=(\d{3})+(?!\d))/g,",")};this.numberRemoveCommas=function(x){return x.toString().trim().replace(/\D/g,"")};this.floatReplaceComma=function(x){return x.trim().replace(/,/g,".")};this.filterNumbers=function(input){var value=$(input).val().trim();$(input).val(value.toString().replace(/(?!\-)\D/g,""))};this.forbidNumbers=function(input){var value=$(input).val().trim();$(input).val(value.toString().replace(/\d/g,""))};this.hlEmpty=function(object){for(var i=0;i<object.neccesary.length;i++){if($("#"+object.neccesary[i]).val().trim().length===0){$("#"+object.neccesary[i]).css({background:"#f2dede"})}else{$("#"+object.neccesary[i]).css("background","")}}};this.hlSingleField=function(field){field.css({background:"#f2dede"})};this.unHlSingleField=function(field){field.css("background","")};this.getNow=function(){var now=new Date();return Math.floor(now.getTime()/1000)};this.lockContactRemark=function(contact_number){if($("#contact"+contact_number+"_input").val().trim().length===0){$("#contact"+contact_number+"_remark_input").attr("disabled",true)}};this.unlockContactRemark=function(contact_number){if($("#contact"+contact_number+"_input").val().trim().length>0){$("#contact"+contact_number+"_remark_input").attr("disabled",false)}};this.getDayTime=function(timestamp){var hh=Math.floor(timestamp/3600);var mm=Math.floor(timestamp%3600/60);if(String(hh).length===1){hh="0"+hh}if(String(mm).length===1){mm="0"+mm}return hh+":"+mm};this.getNavigator=function(name){var isIE=false;var isChrome=false;var isOpera=false;switch(name){case"opera":isOpera=true;return(!!window.opr&&!!opr.addons)||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;break;case"ff":return typeof InstallTrigger!=="undefined";break;case"safari":return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0;break;case"ie":isIE=true;return 
/*@cc_on!@*/
false||!!document.documentMode;break;case"edge":return !isIE&&!!window.StyleMedia;break;case"chrome":isChrome=true;return !!window.chrome&&!!window.chrome.webstore;break;default:return(isChrome||isOpera)&&!!window.CSS;break}};this.checkFieldsBothFilled=function(field1,field2,msg1,msg2){if(field1.val().trim().length>0&&field2.val().trim().length===0){this.hlSingleField(field2);throw msg1}else{if(field1.val().trim().length===0&&field2.val().trim().length>0){this.hlSingleField(field1);throw msg2}}};this.checkFieldsFinishNoLessEqualStart=function(field1,field2,msg){if(field1.val().trim().length>0&&field2.val().trim().length>0){if(Number(field1.val().trim())>=Number(field2.val().trim())){utils.hlSingleField(field1);utils.hlSingleField(field2);throw msg}else{utils.unHlSingleField(field1);utils.unHlSingleField(field2)}}};this.checkFieldsFinishNoLessStart=function(field1,field2,msg){if(field1.val().trim().length>0&&field2.val().trim().length>0){if(Number(field1.val().trim())>Number(field2.val().trim())){utils.hlSingleField(field1);utils.hlSingleField(field2);throw msg}else{utils.unHlSingleField(field1);utils.unHlSingleField(field2)}}};this.getCookie=function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined};this.setCookie=function(name,value,options){options=options||{};var expires=options.expires;if(typeof expires=="number"&&expires){var d=new Date();d.setTime(d.getTime()+expires*1000);expires=options.expires=d}if(expires&&expires.toUTCString){options.expires=expires.toUTCString()}value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];if(propValue!==true){updatedCookie+="="+propValue}}document.cookie=updatedCookie};this.htmlSpinner=function(element_id){$("#"+element_id).attr("text_buffer",$("#"+element_id).text()).html('<i class="fa fa-spinner fa-spin"></i>')};this.removeHtmlSpinner=function(element_id){$("#"+element_id).html($("#"+element_id).attr("text_buffer"))};this.getJSONValueKey=function(object,key,value){for(var i=0;i<object.length;i++){if(object[i][key]==value){return i}}return -1};this.onOwlToggle=function(){if(!owl.locked&&$(".sidebar-mini").length==1&&$(".main-content-wrapper").offset().left<350){$(".owl_side_button").addClass("owl_close_side_button").removeClass("owl_side_button");$(".main-content-wrapper").attr("style","margin-left: 350px !important;")}else{if(!owl.locked){$(".owl_close_side_button").removeClass("owl_close_side_button").addClass("owl_side_button");$(".main-content-wrapper").css("margin-left","auto")}}};this.sortString=function(array,extractor){var splitters=array.map(makeSplitter);var sorted=splitters.sort(compareSplitters);return sorted.map(function(splitter){return splitter.item});function makeSplitter(item){return new Splitter(item)}function Splitter(item){var index=0;var from=0;var parts=[];var completed=false;this.item=item;var key=(typeof(extractor)==="function")?extractor(item):item;this.key=key;this.count=function(){return parts.length};this.part=function(i){while(parts.length<=i&&!completed){next()}return(i<parts.length)?parts[i]:null};function next(){if(index<key.length){while(++index){var currentIsDigit=isDigit(key.charAt(index-1));var nextChar=key.charAt(index);var currentIsLast=(index===key.length);var isBorder=currentIsLast||xor(currentIsDigit,isDigit(nextChar));if(isBorder){var partStr=key.slice(from,index);parts.push(new Part(partStr,currentIsDigit));from=index;break}}}else{completed=true}}function Part(text,isNumber){this.isNumber=isNumber;this.value=isNumber?Number(text):text}}function compareSplitters(sp1,sp2){var i=0;do{var first=sp1.part(i);var second=sp2.part(i);if(null!==first&&null!==second){if(xor(first.isNumber,second.isNumber)){return first.isNumber?-1:1}else{var comp=compare(first.value,second.value);if(comp!=0){return comp}}}else{return compare(sp1.count(),sp2.count())}}while(++i);function compare(a,b){if(response_list.sorted===0){return(a<b)?-1:(a>b)?1:0}else{return(a>b)?-1:(a<b)?1:0}}}function xor(a,b){return a?!b:b}function isDigit(chr){var code=charCode(chr);return(code>=charCode("0"))&&(code<=charCode("9"));function charCode(ch){return ch.charCodeAt(0)}}};this.isJSON=function(argument){return Object.prototype.toString.call(argument)==="[object Object]"?true:false};this.isArray=function(argument){return Object.prototype.toString.call(argument)==="[object Array]"?true:false};this.addGooglePlace=function(placeid,short_name,long_name){$.post("/api/googleac/ajaxadd.json",{short_name:short_name,long_name:long_name,placeid:placeid},null)};this.addGooglePlaceLatLng=function(location,placeid){$.post("/api/googleac/ajaxaddlatlng.json",{lat:location.lat(),lng:location.lng(),placeid:placeid},null)};this.stringContains=function(string,substring){if(string.indexOf(substring)===-1){return false}else{return true}};this.arrUnique=function(array,key){if(array.length===0){return array}var new_array=[array.pop()];var exist=0;while(array.length>0){exist=0;var element=array.pop();for(var i=0;i<new_array.length;i++){if(element!=null&&new_array[i]!=null&&element[key]!=null&&element[key]==new_array[i][key]){exist++}}if(exist==0){new_array.push(element)}}return new_array};this.setPasswordShowButton=function(password_input,show_button){show_button.click({input:password_input},function(e){if(e.data.input.attr("type")==="password"){e.data.input.attr("type","text")}else{e.data.input.attr("type","password")}})};this.getNavigatorLang=function(){var lang=navigator.language||navigator.userLanguage;switch(lang){case"en-US":return"en";break;case"he":return"he";break;case"ru":return"ru";break;default:return"en";break}};this.setSelectOverflow=function(select){$(select).attr("title",$(select).children("option:selected").text())};this.setSelectsOverflows=function(list){for(var i=0;i<list.length;i++){$("#"+list[i]).attr("title",$("#"+list[i]).children("option:selected").text())}}};