
function Localization(){this.locale_value=null;this.locale_data=null;this.init=function(){$("#locale_select").change(function(){localization.changeLocale($(this).val())});$.post("/api/localization/getdefaultlocale.json",{},function(a){localization.locale_value=a.locale_value;localization.locale_data=a.locale_data;localization.toLocaleOnInit()})};this.toLocaleOnInit=function(a){for(var c=0;c<this.locale_data.length;c++){var d=$('*[locale="'+this.locale_data[c].variable+'"]');var b=this.locale_data[c][this.locale_value];d.html(b);this.localeTitle(c);if(this.isOverflowed(d)){d.attr("title",b)}else{d.attr("title","")}}this.setDatepickerLocale();this.setArabian();$(".help_tip, .help_tip_span, .help_tip_label").tooltip()};this.changeLocale=function(a){utils.setCookie("locale",a,{expires:315360000});if(typeof user!="undefined"&&user.id!=4){$.post("/api/defaults/set.json",{parameter:"locale",value:a},function(b){if(b.error!=undefined){showErrorMessage(b.error.description)}else{location.reload()}})}else{location.reload()}};this.toLocale=function(){if(this.locale_data!=null){for(var b=0;b<this.locale_data.length;b++){var c=$('*[locale="'+this.locale_data[b].variable+'"]');var a=this.locale_data[b][this.locale_value];c.html(a);this.localeTitle(b);if(localization.isOverflowed(c)){c.attr("title",a)}else{c.attr("title","")}}this.setArabian();$(".help_tip, .help_tip_span, .help_tip_label").tooltip()}};this.getVariable=function(b){if(this.locale_data!=null){for(var a=0;a<this.locale_data.length;a++){if(this.locale_data[a].variable===b){return this.locale_data[a][this.locale_value]}}}};this.localeTitle=function(a){var c=$('*[locale_title="'+this.locale_data[a].variable+'"]');var b=this.locale_data[a][this.locale_value];if(c.attr("data-original-title")==undefined){c.attr("title",b)}c=$('*[locale_data_title="'+this.locale_data[a].variable+'"]');b=this.locale_data[a][this.locale_value];c.attr("data-title",b);c=$('*[locale_placeholder="'+this.locale_data[a].variable+'"]');b=this.locale_data[a][this.locale_value];c.attr("placeholder",b)};this.setArabian=function(){if(location.pathname=="/"){if(this.locale_value=="he"||this.locale_value=="ar"||this.locale_value=="fa"){$("body").attr("dir","rtl");if(this.locale_value!="ar"&&this.locale_value!="fa"){$("#slider #youtube_slide").show()}}else{$("body").attr("dir","ltr")}}else{if(location.pathname!="/"&&(this.locale_value=="he"||this.locale_value=="ar"||this.locale_value=="fa")){$("span, label, input, button, a, .modal, select, textarea").css("direction","rtl");$("#tools_button, #help_a, #toggle-right, #logout_a").css("direction","ltr");$(".show_password_span").css("right","-21px");$(".modal-header > button.close").css("float","left");$("#bug_a").css("direction","ltr");switch(location.pathname){case"/query":$("#legend_wrapper").css("float","left");$("ul.tagit li").css("float","right");$("#property_results_table_wrapper, #client_results_table_wrapper").css("direction","rtl");break;case"/client":$("#comparison_modal .modal_header_buttons_block").css({direction:"ltr",marginRight:"30px"});break;case"/property":$("#comparison_modal .modal_header_buttons_block").css({direction:"ltr",marginRight:"30px"});break}}else{$("body").attr("dir","ltr");$("span, label, input, button, a, .modal, select, textarea").css("direction","ltr");$("#property_results_table_wrapper, #client_results_table_wrapper").css("direction","ltr");$(".show_password_span").css("right","12px");$(".modal-header > button.close").css("float","right");switch(location.pathname){case"/query":$("#legend_wrapper").css("float","right");$("ul.tagit li").css("float","left");$("#property_results_table_wrapper, #client_results_table_wrapper").css("direction","ltr");break;case"/client":$("#comparison_modal .modal_header_buttons_block").css({marginRight:"0px"});break;case"/property":$("#comparison_modal .modal_header_buttons_block").css({marginRight:"0px"});break}}}};this.isArabian=function(){if(this.locale_value==="he"||this.locale_value==="ar"||this.locale_value==="fa"){return true}else{return false}};this.isOverflowed=function(a){var b=a[0];if(b!=undefined){return b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth}else{return false}};this.textOverflowed=function(i){var h=i.prop("tagName");var b=i.css("font-family");var a=i.css("font-size");var d=i.css("font-weight");var c=document.createElement("canvas");var f=c.getContext("2d");f.font=b+" "+a+" "+d;switch(h){case"OPTION":var g=f.measureText(i.html());if(i.parent().width()>g.width*1.3){return false}else{return true}break;case"INPUT":var g=f.measureText(i.val());if(i.width()>g.width*1.3){return false}else{return true}break}};this.setDatepickerLocale=function(){var a="en";switch(this.locale_value){case"he":a="he";break;case"ru":a="ru";break;case"fr":a="fr";break}if(location.pathname==="/query"||location.pathname==="/property"||location.pathname==="/client"||location.pathname==="/map"||location.pathname==="/balance"){$.datepicker.setDefaults($.datepicker.regional[a])}}};